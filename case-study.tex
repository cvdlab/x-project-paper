\section{Case study}
In this section we discuss the design and the implementation of a blog platform. 

\subsection{Models}

For a blog platform the essential entities to model are: \texttt{Post} and \texttt{Tag}.

\begin{lstlisting}[language=json]
{
  "name": "Post",
  "properties": {
    "title": { "type": "string" },
    "posted": { "type": "date" },
    "content": { "type": "text" },
    "permalink": { "type": "string" }
  }, 
  "relations": [{
    "name": "tags", 
    "type": "has_many", 
    "model": "Tag"
  }]
}
\end{lstlisting}

\begin{lstlisting}[language=json]
{
  "name": "Tag",
  "properties": {
    "name": { "type": "string" }
  }
}
\end{lstlisting}


\subsection{Pages}

\texttt{<page-posts>} show the list of posts.

It use \texttt{<api-collection-get>}, \texttt{<x-paginator>}, and \texttt{<x-list>} to retrieve, paginate and list the posts.

\begin{lstlisting}[language=HTML5]
<page-posts is="x-page">
  <api-collection-get name="Posts"
    page="{{page}}" perpage="10"
    collection="{{posts}} count="{{count}}">
  </api-collection-get>
  <template is="dom-repeat" items="{{posts}}">
    <div>
      <h1>{{post.title}}</h1>
      <h2>by <span>{{post.author}}</span></h2>
      <h3>on <span>{{post.date}}</span></h3>
    </div>
  </template>
  <x-paginator perpage="10" total="{{count}}" 
    current="{{page}}></x-paginator>
</page-posts>
\end{lstlisting}

\texttt{<page-post>} show a post. 

It is accessible via \texttt{<x-route path="/posts/:post\_id" page="page-post"}

\begin{lstlisting}[language=HTML5]
<page-post is="x-page">
  <api-model-get name="Posts" 
    model-id="{{post_id}}" model="{{post}}">
  </api-model-get>
  <h1>{{post.title}}</h1>
  <h2>by <span>{{post.author}}</span></h2>
  <h3>on <span>{{post.date}}</span></h3>
  <div>{{post.content}}</div>
</page-post>
\end{lstlisting}
