\section{Case study}\label{sec:case-study}
In this section we discuss the design and the implementation of a blog platform. 

\subsection{Models}

For a blog platform the essential entities to model are: \texttt{Post} and \texttt{Tag}.

\begin{lstlisting}[language=json]
{
  "name": "Post",
  "properties": {
    "title": { "type": "string" },
    "posted": { "type": "date" },
    "content": { "type": "text" },
    "permalink": { "type": "string" }
  }, 
  "relations": [{
    "name": "tags", 
    "type": "has_many", 
    "model": "Tag"
  }]
}
\end{lstlisting}

\begin{lstlisting}[language=json]
{
  "name": "Tag",
  "properties": {
    "name": { "type": "string" }
  }
}
\end{lstlisting}

It results in the following HTTP RESTful API.

\begin{lstlisting}
GET|POST /api/Posts
GET|PUT|DELETE /api/Posts/:post_id
GET|POST /api/Tags
GET|PUT|DELETE /api/Tags/:tag_id
\end{lstlisting}

\subsection{Pages}

\texttt{<page-posts>} show the list of posts.
It is accessible via \texttt{/posts/} route.

\begin{lstlisting}[language=HTML5]
<dom-module id="page-posts">
<template>
  <api-collection-get name="Posts"
    page="{{page}}" perpage="10"
    collection="{{posts}}" count="{{count}}">
  </api-collection-get>
  <template is="dom-repeat" items="{{posts}}">
    <div>
      <h1>{{post.title}}</h1>
      <h2>by <span>{{post.author}}</span></h2>
      <h3>on <span>{{post.date}}</span></h3>
    </div>
  </template>
  <x-paginator perpage="10" total="{{count}}" 
    current="{{page}}"></x-paginator>
</template>
</dom-module>
\end{lstlisting}

\texttt{<page-post>} show a post. 
It is accessible via \texttt{/posts/:post\_id} route.
The router pass the \texttt{post\_id} parameter to the page.

\begin{lstlisting}[language=HTML5]
<dom-module id="page-post">
<template>
  <api-model-get name="Posts" 
    model-id="{{post_id}}" model="{{post}}">
  </api-model-get>
  <h1>{{post.title}}</h1>
  <h2>by <span>{{post.author}}</span></h2>
  <h3>on <span>{{post.date}}</span></h3>
  <div>{{post.content}}</div>
</template>
</dom-module>
\end{lstlisting}
